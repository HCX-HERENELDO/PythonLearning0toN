#!/usr/bin/env python
# -*- coding: utf-8 -*-
"""
============================================================================
æ¨¡å—åç§°ï¼šæŽ¨å¯¼å¼
å­¦ä¹ ç›®æ ‡ï¼šç²¾é€šå„ç§æŽ¨å¯¼å¼ï¼Œå†™å‡ºæ›´ Pythonic çš„ä»£ç 
PyCharm æŠ€å·§ï¼šå­¦ä¹ ä½¿ç”¨ä»£ç é‡æž„åŠŸèƒ½
============================================================================
"""

# ============================================================================
# ç¬¬ä¸€éƒ¨åˆ†ï¼šåˆ—è¡¨æŽ¨å¯¼å¼
# ============================================================================
"""
ã€æ¦‚å¿µè®²è§£ã€‘
æŽ¨å¯¼å¼ï¼ˆComprehensionï¼‰æ˜¯ Python ç‰¹æœ‰çš„ç®€æ´è¯­æ³•ï¼Œ
å¯ä»¥ç”¨ä¸€è¡Œä»£ç åˆ›å»ºåˆ—è¡¨ã€å­—å…¸ã€é›†åˆç­‰ã€‚
"""

# ----------------------------------------------------------------------------
# åŸºæœ¬è¯­æ³•
# ----------------------------------------------------------------------------

# [è¡¨è¾¾å¼ for å˜é‡ in å¯è¿­ä»£å¯¹è±¡]
squares = [x ** 2 for x in range(10)]
print(f"å¹³æ–¹æ•°: {squares}")

# ç­‰ä»·çš„ä¼ ç»Ÿå†™æ³•
squares_traditional = []
for x in range(10):
    squares_traditional.append(x ** 2)

# ----------------------------------------------------------------------------
# å¸¦æ¡ä»¶çš„æŽ¨å¯¼å¼
# ----------------------------------------------------------------------------

# [è¡¨è¾¾å¼ for å˜é‡ in å¯è¿­ä»£å¯¹è±¡ if æ¡ä»¶]
evens = [x for x in range(20) if x % 2 == 0]
print(f"å¶æ•°: {evens}")

# ç­‰ä»·çš„ä¼ ç»Ÿå†™æ³•
evens_traditional = []
for x in range(20):
    if x % 2 == 0:
        evens_traditional.append(x)

# å¤šæ¡ä»¶è¿‡æ»¤
numbers = range(20)
filtered = [x for x in numbers if x % 2 == 0 if x > 5]
print(f"å¤§äºŽ5çš„å¶æ•°: {filtered}")

# ----------------------------------------------------------------------------
# å¸¦æ¡ä»¶è¡¨è¾¾å¼çš„æŽ¨å¯¼å¼
# ----------------------------------------------------------------------------

# [è¡¨è¾¾å¼1 if æ¡ä»¶ else è¡¨è¾¾å¼2 for å˜é‡ in å¯è¿­ä»£å¯¹è±¡]
labels = ["å¶æ•°" if x % 2 == 0 else "å¥‡æ•°" for x in range(10)]
print(f"æ ‡ç­¾: {labels}")

# åº”ç”¨ï¼šå°†è´Ÿæ•°è½¬ä¸º 0
numbers = [-3, -1, 0, 2, 4, -5]
non_negative = [x if x >= 0 else 0 for x in numbers]
print(f"éžè´Ÿæ•°: {non_negative}")

# ----------------------------------------------------------------------------
# åµŒå¥—æŽ¨å¯¼å¼
# ----------------------------------------------------------------------------

# åµŒå¥—å¾ªçŽ¯
matrix = [[i * j for j in range(1, 4)] for i in range(1, 4)]
print(f"çŸ©é˜µ:")
for row in matrix:
    print(f"  {row}")

# ç­‰ä»·çš„ä¼ ç»Ÿå†™æ³•
matrix_traditional = []
for i in range(1, 4):
    row = []
    for j in range(1, 4):
        row.append(i * j)
    matrix_traditional.append(row)

# æ‰å¹³åŒ–äºŒç»´åˆ—è¡¨
flat = [item for row in matrix for item in row]
print(f"æ‰å¹³åŒ–: {flat}")

# ç¬›å¡å°”ç§¯
colors = ["çº¢", "è“"]
sizes = ["S", "M", "L"]
products = [(color, size) for color in colors for size in sizes]
print(f"ç¬›å¡å°”ç§¯: {products}")

# ã€PyCharm æŠ€å·§ã€‘
# é€‰ä¸­æŽ¨å¯¼å¼ä»£ç ï¼ŒæŒ‰ Ctrl+Alt+V å¯ä»¥æå–ä¸ºå˜é‡
# æŒ‰ Ctrl+Alt+N å¯ä»¥å†…è”å˜é‡

# ============================================================================
# ç¬¬äºŒéƒ¨åˆ†ï¼šå­—å…¸æŽ¨å¯¼å¼
# ============================================================================

# ----------------------------------------------------------------------------
# åŸºæœ¬è¯­æ³•
# ----------------------------------------------------------------------------

# {é”®è¡¨è¾¾å¼: å€¼è¡¨è¾¾å¼ for å˜é‡ in å¯è¿­ä»£å¯¹è±¡}
squares_dict = {x: x ** 2 for x in range(5)}
print(f"å¹³æ–¹å­—å…¸: {squares_dict}")

# ä»Žä¸¤ä¸ªåˆ—è¡¨åˆ›å»ºå­—å…¸
keys = ["name", "age", "city"]
values = ["å¼ ä¸‰", 20, "åŒ—äº¬"]
student = {k: v for k, v in zip(keys, values)}
print(f"å­¦ç”Ÿä¿¡æ¯: {student}")

# ----------------------------------------------------------------------------
# å¸¦æ¡ä»¶çš„å­—å…¸æŽ¨å¯¼å¼
# ----------------------------------------------------------------------------

# è¿‡æ»¤å­—å…¸
scores = {"è¯­æ–‡": 90, "æ•°å­¦": 58, "è‹±è¯­": 85, "ç‰©ç†": 55}
passed = {subject: score for subject, score in scores.items() if score >= 60}
print(f"åŠæ ¼ç§‘ç›®: {passed}")

# ä¿®æ”¹é”®å€¼
words = ["hello", "world", "python"]
word_lengths = {word: len(word) for word in words}
print(f"å•è¯é•¿åº¦: {word_lengths}")

# ----------------------------------------------------------------------------
# å­—å…¸åè½¬
# ----------------------------------------------------------------------------

original = {"a": 1, "b": 2, "c": 3}
reversed_dict = {v: k for k, v in original.items()}
print(f"åè½¬å­—å…¸: {reversed_dict}")

# å¤„ç†é‡å¤å€¼
data = {"a": 1, "b": 1, "c": 2}
# åè½¬æ—¶åªä¿ç•™æœ€åŽä¸€ä¸ª
reversed_data = {v: k for k, v in data.items()}
print(f"é‡å¤å€¼åè½¬: {reversed_data}")

# ä¿ç•™æ‰€æœ‰é”®ï¼ˆä½¿ç”¨åˆ—è¡¨ï¼‰
from collections import defaultdict
reversed_multi = defaultdict(list)
for k, v in data.items():
    reversed_multi[v].append(k)
print(f"ä¿ç•™æ‰€æœ‰é”®: {dict(reversed_multi)}")

# ============================================================================
# ç¬¬ä¸‰éƒ¨åˆ†ï¼šé›†åˆæŽ¨å¯¼å¼
# ============================================================================

# ----------------------------------------------------------------------------
# åŸºæœ¬è¯­æ³•
# ----------------------------------------------------------------------------

# {è¡¨è¾¾å¼ for å˜é‡ in å¯è¿­ä»£å¯¹è±¡}
numbers = [1, 1, 2, 2, 3, 3, 4, 4, 5]
unique = {x for x in numbers}
print(f"åŽ»é‡é›†åˆ: {unique}")

# å­—ç¬¦ä¸²åŽ»é‡
text = "hello world"
chars = {char for char in text if char != ' '}
print(f"ä¸é‡å¤å­—ç¬¦: {chars}")

# ----------------------------------------------------------------------------
# å¸¦æ¡ä»¶çš„é›†åˆæŽ¨å¯¼å¼
# ----------------------------------------------------------------------------

# å¶æ•°çš„å¹³æ–¹
even_squares = {x ** 2 for x in range(10) if x % 2 == 0}
print(f"å¶æ•°çš„å¹³æ–¹: {even_squares}")

# å•è¯é¦–å­—æ¯
words = ["apple", "banana", "cherry"]
first_letters = {word[0] for word in words}
print(f"é¦–å­—æ¯: {first_letters}")

# ============================================================================
# ç¬¬å››éƒ¨åˆ†ï¼šç”Ÿæˆå™¨è¡¨è¾¾å¼
# ============================================================================

# ----------------------------------------------------------------------------
# åŸºæœ¬è¯­æ³•
# ----------------------------------------------------------------------------

# (è¡¨è¾¾å¼ for å˜é‡ in å¯è¿­ä»£å¯¹è±¡)
gen = (x ** 2 for x in range(10))
print(f"ç”Ÿæˆå™¨: {gen}")  # ç”Ÿæˆå™¨å¯¹è±¡

# éåŽ†ç”Ÿæˆå™¨
for value in gen:
    print(value, end=" ")
print()

# ç”Ÿæˆå™¨åªèƒ½éåŽ†ä¸€æ¬¡
gen = (x ** 2 for x in range(5))
print(list(gen))  # [0, 1, 4, 9, 16]
print(list(gen))  # []ï¼ˆå·²ç»è€—å°½ï¼‰

# ----------------------------------------------------------------------------
# åˆ—è¡¨æŽ¨å¯¼å¼ vs ç”Ÿæˆå™¨è¡¨è¾¾å¼
# ----------------------------------------------------------------------------

import sys

# åˆ—è¡¨æŽ¨å¯¼å¼ï¼šç«‹å³è®¡ç®—ï¼Œå ç”¨å†…å­˜
list_comp = [x ** 2 for x in range(10000)]
print(f"åˆ—è¡¨å†…å­˜: {sys.getsizeof(list_comp)} å­—èŠ‚")

# ç”Ÿæˆå™¨è¡¨è¾¾å¼ï¼šæƒ°æ€§è®¡ç®—ï¼ŒèŠ‚çœå†…å­˜
gen_exp = (x ** 2 for x in range(10000))
print(f"ç”Ÿæˆå™¨å†…å­˜: {sys.getsizeof(gen_exp)} å­—èŠ‚")

"""
ã€ä½¿ç”¨å»ºè®®ã€‘
- æ•°æ®é‡å°ï¼šä½¿ç”¨åˆ—è¡¨æŽ¨å¯¼å¼ï¼Œå¯ä»¥é‡å¤ä½¿ç”¨
- æ•°æ®é‡å¤§ï¼šä½¿ç”¨ç”Ÿæˆå™¨è¡¨è¾¾å¼ï¼ŒèŠ‚çœå†…å­˜
- åªéœ€éåŽ†ä¸€æ¬¡ï¼šä½¿ç”¨ç”Ÿæˆå™¨è¡¨è¾¾å¼
"""

# ----------------------------------------------------------------------------
# ç”Ÿæˆå™¨çš„å®žé™…åº”ç”¨
# ----------------------------------------------------------------------------

# æ±‚å’Œï¼ˆä¸éœ€è¦åˆ›å»ºå®Œæ•´åˆ—è¡¨ï¼‰
total = sum(x ** 2 for x in range(1000000))
print(f"å¹³æ–¹å’Œ: {total}")

# æœ€å¤§å€¼
maximum = max(x for x in range(100) if x % 7 == 0)
print(f"7çš„å€æ•°æœ€å¤§å€¼: {maximum}")

# æ–‡ä»¶å¤„ç†
# with open('large_file.txt') as f:
#     lines = (line.strip() for line in f if line.strip())
#     for line in lines:
#         process(line)

# ============================================================================
# ç¬¬äº”éƒ¨åˆ†ï¼šæŽ¨å¯¼å¼çš„é«˜çº§åº”ç”¨
# ============================================================================

# ----------------------------------------------------------------------------
# çŸ©é˜µæ“ä½œ
# ----------------------------------------------------------------------------

# åˆ›å»ºçŸ©é˜µ
matrix = [[i * j for j in range(1, 5)] for i in range(1, 5)]
print("çŸ©é˜µ:")
for row in matrix:
    print(row)

# è½¬ç½®çŸ©é˜µ
transposed = [[row[i] for row in matrix] for i in range(len(matrix[0]))]
print("è½¬ç½®:")
for row in transposed:
    print(row)

# ä½¿ç”¨ zip æ›´ç®€æ´
transposed = [list(col) for col in zip(*matrix)]

# ----------------------------------------------------------------------------
# æ•°æ®æ¸…æ´—
# ----------------------------------------------------------------------------

# æ¸…æ´—ç”¨æˆ·è¾“å…¥
raw_data = ["  hello  ", "  world  ", "", "  python  "]
clean_data = [s.strip() for s in raw_data if s.strip()]
print(f"æ¸…æ´—åŽ: {clean_data}")

# æ•°æ®ç±»åž‹è½¬æ¢
str_numbers = ["1", "2", "3", "4", "5"]
int_numbers = [int(s) for s in str_numbers]
print(f"è½¬æ¢åŽ: {int_numbers}")

# å¤„ç†åµŒå¥—æ•°æ®
users = [
    {"name": "å¼ ä¸‰", "scores": [85, 90, 78]},
    {"name": "æŽå››", "scores": [92, 88, 95]},
]
averages = {user["name"]: sum(user["scores"]) / len(user["scores"]) for user in users}
print(f"å¹³å‡åˆ†: {averages}")

# ----------------------------------------------------------------------------
# æ¡ä»¶æ˜ å°„
# ----------------------------------------------------------------------------

# æˆç»©ç­‰çº§
scores = [95, 82, 67, 45, 88, 72]
grades = {
    "A": [s for s in scores if s >= 90],
    "B": [s for s in scores if 80 <= s < 90],
    "C": [s for s in scores if 70 <= s < 80],
    "D": [s for s in scores if 60 <= s < 70],
    "F": [s for s in scores if s < 60],
}
print(f"æˆç»©åˆ†ç»„: {grades}")

# ============================================================================
# ç¬¬å…­éƒ¨åˆ†ï¼šæŽ¨å¯¼å¼çš„æ€§èƒ½
# ============================================================================

import time

# æ€§èƒ½å¯¹æ¯”
numbers = range(1000000)

# ä¼ ç»Ÿ for å¾ªçŽ¯
start = time.time()
result1 = []
for x in numbers:
    result1.append(x ** 2)
for_time = time.time() - start

# åˆ—è¡¨æŽ¨å¯¼å¼
start = time.time()
result2 = [x ** 2 for x in numbers]
comp_time = time.time() - start

# ç”Ÿæˆå™¨è¡¨è¾¾å¼è½¬åˆ—è¡¨
start = time.time()
result3 = list(x ** 2 for x in numbers)
gen_time = time.time() - start

# map å‡½æ•°
start = time.time()
result4 = list(map(lambda x: x ** 2, numbers))
map_time = time.time() - start

print(f"for å¾ªçŽ¯: {for_time:.4f}ç§’")
print(f"åˆ—è¡¨æŽ¨å¯¼å¼: {comp_time:.4f}ç§’")
print(f"ç”Ÿæˆå™¨è¡¨è¾¾å¼: {gen_time:.4f}ç§’")
print(f"map å‡½æ•°: {map_time:.4f}ç§’")

"""
ã€æ€§èƒ½ç»“è®ºã€‘
åˆ—è¡¨æŽ¨å¯¼å¼é€šå¸¸æ¯” for å¾ªçŽ¯å¿«
å› ä¸ºæŽ¨å¯¼å¼åœ¨ Python å†…éƒ¨ä¼˜åŒ–äº†è¿­ä»£è¿‡ç¨‹
"""

# ============================================================================
# ç¬¬ä¸ƒéƒ¨åˆ†ï¼šæŽ¨å¯¼å¼çš„å¯è¯»æ€§
# ============================================================================

# ----------------------------------------------------------------------------
# ä½•æ—¶ä½¿ç”¨æŽ¨å¯¼å¼
# ----------------------------------------------------------------------------

# âœ… ç®€å•æ¸…æ™°çš„æƒ…å†µ
squares = [x ** 2 for x in range(10)]

# âœ… é€‚åº¦å¤æ‚çš„æƒ…å†µ
evens = [x for x in range(100) if x % 2 == 0]

# âŒ è¿‡äºŽå¤æ‚çš„æƒ…å†µï¼ˆä¸æŽ¨èï¼‰
# result = [func(x, y) for x in range(10) if condition1(x) for y in range(20) if condition2(y) if condition3(x, y)]

# å¤æ‚æƒ…å†µåº”è¯¥ç”¨ä¼ ç»Ÿå†™æ³•
result = []
for x in range(10):
    if condition1(x):
        for y in range(20):
            if condition2(y) and condition3(x, y):
                result.append(func(x, y))

"""
ã€å¯è¯»æ€§åŽŸåˆ™ã€‘
1. æŽ¨å¯¼å¼åº”è¯¥èƒ½åœ¨ä¸€è¡Œå†…å†™å®Œ
2. åµŒå¥—ä¸è¶…è¿‡ä¸¤å±‚
3. æ¡ä»¶ä¸è¶…è¿‡ä¸¤ä¸ª
4. å¦‚æžœéœ€è¦æ³¨é‡Šæ¥è§£é‡Šï¼Œè€ƒè™‘ç”¨ä¼ ç»Ÿå†™æ³•
"""

# ============================================================================
# ç»ƒä¹ é¢˜
# ============================================================================
"""
ã€ç»ƒä¹ 1ã€‘åˆ—è¡¨æŽ¨å¯¼å¼
1. ç”Ÿæˆ 1-100 ä¸­æ‰€æœ‰è´¨æ•°çš„åˆ—è¡¨
2. å°†å­—ç¬¦ä¸²åˆ—è¡¨è½¬ä¸ºé¦–å­—æ¯å¤§å†™
3. æ‰¾å‡ºåˆ—è¡¨ä¸­æ‰€æœ‰çš„å›žæ–‡æ•°

ã€ç»ƒä¹ 2ã€‘å­—å…¸æŽ¨å¯¼å¼
1. åˆ›å»ºä¸€ä¸ªå¹³æ–¹æ•°å­—å…¸ {1:1, 2:4, 3:9, ...}
2. äº¤æ¢å­—å…¸çš„é”®å’Œå€¼
3. è¿‡æ»¤å‡ºå­—å…¸ä¸­å€¼å¤§äºŽå¹³å‡å€¼çš„é”®å€¼å¯¹

ã€ç»ƒä¹ 3ã€‘ç»¼åˆåº”ç”¨
1. ç»™å®šå¥å­ï¼Œç»Ÿè®¡æ¯ä¸ªå•è¯çš„é•¿åº¦
2. å°†äºŒç»´åˆ—è¡¨æ‰å¹³åŒ–å¹¶è¿‡æ»¤å¶æ•°
3. åˆ›å»ºå­¦ç”Ÿæˆç»©å­—å…¸ï¼ŒåŒ…å«æ€»åˆ†å’Œå¹³å‡åˆ†
"""

# ============================================================================
# æœ¬èŠ‚å°ç»“
# ============================================================================
"""
âœ… æŽŒæ¡çš„çŸ¥è¯†ç‚¹ï¼š
1. åˆ—è¡¨æŽ¨å¯¼å¼çš„è¯­æ³•å’Œåº”ç”¨
2. å­—å…¸æŽ¨å¯¼å¼çš„è¯­æ³•å’Œåº”ç”¨
3. é›†åˆæŽ¨å¯¼å¼çš„è¯­æ³•å’Œåº”ç”¨
4. ç”Ÿæˆå™¨è¡¨è¾¾å¼
5. æŽ¨å¯¼å¼çš„æ€§èƒ½å’Œå¯è¯»æ€§

ðŸ”§ PyCharm æŠ€å·§ï¼š
1. Ctrl+Alt+V æå–å˜é‡
2. Ctrl+Alt+N å†…è”å˜é‡
3. Ctrl+Alt+M æå–æ–¹æ³•
4. Alt+Enter å¿«é€Ÿä¿®å¤

âž¡ï¸ æ­å–œå®Œæˆæ•°æ®ç»“æž„æ¨¡å—ï¼
âž¡ï¸ ä¸‹ä¸€æ¨¡å—ï¼šå‡½æ•°ä¸Žæ¨¡å—
"""

if __name__ == "__main__":
    print("\n" + "=" * 60)
    print("æŽ¨å¯¼å¼æ¨¡å—å­¦ä¹ å®Œæˆï¼")
    print("æ•°æ®ç»“æž„æ¨¡å—å…¨éƒ¨å®Œæˆï¼")
    print("=" * 60)
