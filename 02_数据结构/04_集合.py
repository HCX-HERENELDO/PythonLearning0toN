#!/usr/bin/env python
# -*- coding: utf-8 -*-
"""
============================================================================
æ¨¡å—åç§°ï¼šé›†åˆ
å­¦ä¹ ç›®æ ‡ï¼šæŒæ¡é›†åˆçš„åˆ›å»ºã€æ“ä½œå’Œåº”ç”¨åœºæ™¯
PyCharm æŠ€å·§ï¼šå­¦ä¹ ä½¿ç”¨è°ƒè¯•å™¨è§‚å¯Ÿé›†åˆçš„è¿ç®—è¿‡ç¨‹
============================================================================
"""

# ============================================================================
# ç¬¬ä¸€éƒ¨åˆ†ï¼šé›†åˆåŸºç¡€
# ============================================================================
"""
ã€æ¦‚å¿µè®²è§£ã€‘
é›†åˆï¼ˆSetï¼‰æ˜¯ä¸€ä¸ªæ— åºçš„ä¸é‡å¤å…ƒç´ åºåˆ—ã€‚
é›†åˆä¸­çš„å…ƒç´ å¿…é¡»æ˜¯å¯å“ˆå¸Œçš„ï¼ˆä¸å¯å˜ç±»å‹ï¼‰ã€‚
é›†åˆæ”¯æŒæ•°å­¦è¿ç®—å¦‚å¹¶é›†ã€äº¤é›†ã€å·®é›†ç­‰ã€‚
"""

# ----------------------------------------------------------------------------
# åˆ›å»ºé›†åˆ
# ----------------------------------------------------------------------------

# ç›´æ¥åˆ›å»º
fruits = {"è‹¹æœ", "é¦™è•‰", "æ©™å­"}
numbers = {1, 2, 3, 4, 5}

# ç©ºé›†åˆï¼ˆæ³¨æ„ï¼š{} æ˜¯ç©ºå­—å…¸ï¼ï¼‰
empty_set = set()  # æ­£ç¡®
# wrong = {}        # è¿™æ˜¯ç©ºå­—å…¸ï¼

# ä½¿ç”¨ set() å‡½æ•°
from_list = set([1, 2, 2, 3, 3, 3])  # {1, 2, 3}ï¼Œè‡ªåŠ¨å»é‡
from_string = set("hello")            # {'h', 'e', 'l', 'o'}

print(f"ä»åˆ—è¡¨åˆ›å»º: {from_list}")
print(f"ä»å­—ç¬¦ä¸²åˆ›å»º: {from_string}")

# é›†åˆæ¨å¯¼å¼
squares = {x ** 2 for x in range(10)}
print(f"å¹³æ–¹é›†åˆ: {squares}")

# ã€PyCharm æŠ€å·§ã€‘
# åœ¨ Variables é¢æ¿å¯ä»¥æŸ¥çœ‹é›†åˆå…ƒç´ 
# é›†åˆæ˜¯æ— åºçš„ï¼Œæ¯æ¬¡æ˜¾ç¤ºé¡ºåºå¯èƒ½ä¸åŒ

# ----------------------------------------------------------------------------
# é›†åˆç‰¹ç‚¹
# ----------------------------------------------------------------------------

# 1. å…ƒç´ å”¯ä¸€
nums = {1, 1, 2, 2, 3, 3}
print(f"å»é‡: {nums}")  # {1, 2, 3}

# 2. å…ƒç´ å¿…é¡»æ˜¯ä¸å¯å˜ç±»å‹
valid_set = {1, "hello", (1, 2)}  # OK
# invalid_set = {1, [1, 2]}       # TypeErrorï¼Œåˆ—è¡¨ä¸å¯å“ˆå¸Œ

# 3. æ— åº
s = {3, 1, 2}
print(f"é›†åˆ: {s}")  # é¡ºåºå¯èƒ½ä¸åŒ

# ============================================================================
# ç¬¬äºŒéƒ¨åˆ†ï¼šé›†åˆçš„ä¿®æ”¹
# ============================================================================

# ----------------------------------------------------------------------------
# æ·»åŠ å…ƒç´ 
# ----------------------------------------------------------------------------

fruits = {"è‹¹æœ", "é¦™è•‰"}

# add() - æ·»åŠ å•ä¸ªå…ƒç´ 
fruits.add("æ©™å­")
print(f"add: {fruits}")

# æ·»åŠ å·²å­˜åœ¨çš„å…ƒç´ ä¸ä¼šæŠ¥é”™ï¼Œä¹Ÿä¸ä¼šé‡å¤
fruits.add("è‹¹æœ")
print(f"é‡å¤æ·»åŠ : {fruits}")

# update() - æ·»åŠ å¤šä¸ªå…ƒç´ 
fruits.update(["è‘¡è„", "è¥¿ç“œ"])
print(f"update: {fruits}")

# å¯ä»¥æ·»åŠ ä»»ä½•å¯è¿­ä»£å¯¹è±¡
fruits.update("AB")  # æ·»åŠ å­—ç¬¦
print(f"update å­—ç¬¦: {fruits}")

# ----------------------------------------------------------------------------
# åˆ é™¤å…ƒç´ 
# ----------------------------------------------------------------------------

fruits = {"è‹¹æœ", "é¦™è•‰", "æ©™å­", "è‘¡è„"}

# remove() - åˆ é™¤å…ƒç´ ï¼ˆä¸å­˜åœ¨ä¼šæŠ¥é”™ï¼‰
fruits.remove("è‘¡è„")
print(f"remove: {fruits}")
# fruits.remove("ä¸å­˜åœ¨")  # KeyError

# discard() - åˆ é™¤å…ƒç´ ï¼ˆä¸å­˜åœ¨ä¸æŠ¥é”™ï¼‰
fruits.discard("é¦™è•‰")
fruits.discard("ä¸å­˜åœ¨")  # ä¸æŠ¥é”™
print(f"discard: {fruits}")

# pop() - éšæœºåˆ é™¤å¹¶è¿”å›ä¸€ä¸ªå…ƒç´ 
removed = fruits.pop()
print(f"pop åˆ é™¤: {removed}")

# clear() - æ¸…ç©ºé›†åˆ
fruits.clear()
print(f"clear: {fruits}")

# ============================================================================
# ç¬¬ä¸‰éƒ¨åˆ†ï¼šé›†åˆè¿ç®—
# ============================================================================

A = {1, 2, 3, 4, 5}
B = {4, 5, 6, 7, 8}

# ----------------------------------------------------------------------------
# å¹¶é›†
# ----------------------------------------------------------------------------

# è¿ç®—ç¬¦ |
union = A | B
print(f"å¹¶é›† (|): {union}")

# æ–¹æ³• union()
union = A.union(B)
print(f"å¹¶é›† union(): {union}")

# å¤šä¸ªé›†åˆå¹¶é›†
C = {9, 10}
union_all = A | B | C
print(f"å¤šä¸ªå¹¶é›†: {union_all}")

# ----------------------------------------------------------------------------
# äº¤é›†
# ----------------------------------------------------------------------------

# è¿ç®—ç¬¦ &
intersection = A & B
print(f"äº¤é›† (&): {intersection}")

# æ–¹æ³• intersection()
intersection = A.intersection(B)
print(f"äº¤é›† intersection(): {intersection}")

# ----------------------------------------------------------------------------
# å·®é›†
# ----------------------------------------------------------------------------

# è¿ç®—ç¬¦ -ï¼ˆåœ¨ A ä½†ä¸åœ¨ Bï¼‰
difference = A - B
print(f"å·®é›† (-): {difference}")  # {1, 2, 3}

# æ–¹æ³• difference()
difference = A.difference(B)
print(f"å·®é›† difference(): {difference}")

# ----------------------------------------------------------------------------
# å¯¹ç§°å·®é›†
# ----------------------------------------------------------------------------

# è¿ç®—ç¬¦ ^ï¼ˆåœ¨ A æˆ– Bï¼Œä½†ä¸åŒæ—¶åœ¨ä¸¤è€…ï¼‰
symmetric_diff = A ^ B
print(f"å¯¹ç§°å·® (^): {symmetric_diff}")  # {1, 2, 3, 6, 7, 8}

# æ–¹æ³• symmetric_difference()
symmetric_diff = A.symmetric_difference(B)
print(f"å¯¹ç§°å·® symmetric_difference(): {symmetric_diff}")

# ----------------------------------------------------------------------------
# è¿ç®—å›¾ç¤º
# ----------------------------------------------------------------------------

"""
é›†åˆè¿ç®—å›¾ç¤ºï¼š

A = {1, 2, 3, 4, 5}
B = {4, 5, 6, 7, 8}

å¹¶é›† A | B = {1, 2, 3, 4, 5, 6, 7, 8}
äº¤é›† A & B = {4, 5}
å·®é›† A - B = {1, 2, 3}
å¯¹ç§°å·® A ^ B = {1, 2, 3, 6, 7, 8}

éŸ¦æ©å›¾è¡¨ç¤ºï¼š
      A          B
   â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”
   â”‚ 1 2 3 â”‚ â”‚ 6 7 8 â”‚
   â”‚   â”Œâ”€â”€â”€â”¼â”€â”¼â”€â”€â”€â”   â”‚
   â”‚   â”‚ 4 â”‚ â”‚ 5 â”‚   â”‚
   â”‚   â””â”€â”€â”€â”¼â”€â”¼â”€â”€â”€â”˜   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜
"""

# ============================================================================
# ç¬¬å››éƒ¨åˆ†ï¼šé›†åˆçš„æ¯”è¾ƒ
# ============================================================================

# ----------------------------------------------------------------------------
# å­é›†å’Œè¶…é›†
# ----------------------------------------------------------------------------

A = {1, 2, 3}
B = {1, 2, 3, 4, 5}

# å­é›†
print(f"A æ˜¯ B çš„å­é›†: {A <= B}")  # True
print(f"A.issubset(B): {A.issubset(B)}")  # True

# çœŸå­é›†
print(f"A æ˜¯ B çš„çœŸå­é›†: {A < B}")  # True

# è¶…é›†
print(f"B æ˜¯ A çš„è¶…é›†: {B >= A}")  # True
print(f"B.issuperset(A): {B.issuperset(A)}")  # True

# çœŸè¶…é›†
print(f"B æ˜¯ A çš„çœŸè¶…é›†: {B > A}")  # True

# ----------------------------------------------------------------------------
# æ˜¯å¦ç›¸äº¤
# ----------------------------------------------------------------------------

A = {1, 2, 3}
B = {3, 4, 5}
C = {6, 7, 8}

# æ˜¯å¦æœ‰äº¤é›†
print(f"A å’Œ B ç›¸äº¤: {not A.isdisjoint(B)}")  # True
print(f"A å’Œ C ç›¸äº¤: {not A.isdisjoint(C)}")  # False

# ============================================================================
# ç¬¬äº”éƒ¨åˆ†ï¼šé›†åˆæ›´æ–°æ–¹æ³•
# ============================================================================

A = {1, 2, 3, 4, 5}
B = {4, 5, 6, 7, 8}

# ----------------------------------------------------------------------------
# åŸåœ°æ›´æ–°
# ----------------------------------------------------------------------------

# intersection_update() - ä¿ç•™äº¤é›†
A_copy = A.copy()
A_copy.intersection_update(B)
print(f"äº¤é›†æ›´æ–°: {A_copy}")  # {4, 5}

# difference_update() - ä¿ç•™å·®é›†
A_copy = A.copy()
A_copy.difference_update(B)
print(f"å·®é›†æ›´æ–°: {A_copy}")  # {1, 2, 3}

# symmetric_difference_update() - ä¿ç•™å¯¹ç§°å·®
A_copy = A.copy()
A_copy.symmetric_difference_update(B)
print(f"å¯¹ç§°å·®æ›´æ–°: {A_copy}")  # {1, 2, 3, 6, 7, 8}

# update() - æ›´æ–°ä¸ºå¹¶é›†
A_copy = A.copy()
A_copy.update(B)
print(f"å¹¶é›†æ›´æ–°: {A_copy}")

# ============================================================================
# ç¬¬å…­éƒ¨åˆ†ï¼šfrozenset ä¸å¯å˜é›†åˆ
# ============================================================================

# ----------------------------------------------------------------------------
# åˆ›å»ºä¸å¯å˜é›†åˆ
# ----------------------------------------------------------------------------

# frozenset æ˜¯ä¸å¯å˜çš„é›†åˆ
fs = frozenset([1, 2, 3, 4, 5])
print(f"frozenset: {fs}")

# ä¸èƒ½ä¿®æ”¹
# fs.add(6)  # AttributeError
# fs.remove(1)  # AttributeError

# å¯ä»¥ä½œä¸ºå­—å…¸çš„é”®
data = {
    frozenset([1, 2]): "ç‚¹A",
    frozenset([3, 4]): "ç‚¹B",
}
print(f"å­—å…¸é”®: {data[frozenset([1, 2])]}")

# å¯ä»¥ä½œä¸ºé›†åˆçš„å…ƒç´ 
set_of_sets = {frozenset([1, 2]), frozenset([3, 4])}
print(f"é›†åˆçš„é›†åˆ: {set_of_sets}")

# ============================================================================
# ç¬¬ä¸ƒéƒ¨åˆ†ï¼šé›†åˆçš„å®é™…åº”ç”¨
# ============================================================================

# ----------------------------------------------------------------------------
# å»é‡
# ----------------------------------------------------------------------------

# åˆ—è¡¨å»é‡
numbers = [1, 2, 2, 3, 3, 3, 4, 4, 4, 4]
unique = list(set(numbers))
print(f"å»é‡: {unique}")

# ä¿æŒé¡ºåºçš„å»é‡
def unique_ordered(lst):
    seen = set()
    result = []
    for item in lst:
        if item not in seen:
            seen.add(item)
            result.append(item)
    return result

numbers = [3, 1, 2, 2, 3, 1, 4]
print(f"æœ‰åºå»é‡: {unique_ordered(numbers)}")

# ----------------------------------------------------------------------------
# æˆå‘˜æµ‹è¯•
# ----------------------------------------------------------------------------

# é›†åˆçš„æˆå‘˜æµ‹è¯•æ¯”åˆ—è¡¨å¿«å¾—å¤š
import time

# åˆ—è¡¨æˆå‘˜æµ‹è¯•
lst = list(range(100000))
start = time.time()
for i in range(1000):
    _ = 99999 in lst
list_time = time.time() - start

# é›†åˆæˆå‘˜æµ‹è¯•
s = set(range(100000))
start = time.time()
for i in range(1000):
    _ = 99999 in s
set_time = time.time() - start

print(f"åˆ—è¡¨æ—¶é—´: {list_time:.4f}ç§’")
print(f"é›†åˆæ—¶é—´: {set_time:.4f}ç§’")

"""
ã€æ€§èƒ½è¯´æ˜ã€‘
åˆ—è¡¨æˆå‘˜æµ‹è¯•ï¼šO(n)ï¼Œéœ€è¦éå†
é›†åˆæˆå‘˜æµ‹è¯•ï¼šO(1)ï¼Œå“ˆå¸ŒæŸ¥æ‰¾

å½“éœ€è¦é¢‘ç¹æ£€æŸ¥å…ƒç´ æ˜¯å¦å­˜åœ¨æ—¶ï¼Œä½¿ç”¨é›†åˆï¼
"""

# ----------------------------------------------------------------------------
# æ•°æ®åˆ†æ
# ----------------------------------------------------------------------------

# æ‰¾å‡ºä¸¤ç¯‡æ–‡ç« çš„å…±åŒå…³é”®è¯
article1_keywords = {"Python", "ç¼–ç¨‹", "æ•™ç¨‹", "å…¥é—¨", "åŸºç¡€"}
article2_keywords = {"Python", "æ•°æ®", "åˆ†æ", "æ•™ç¨‹", "è¿›é˜¶"}

# å…±åŒå…³é”®è¯
common = article1_keywords & article2_keywords
print(f"å…±åŒå…³é”®è¯: {common}")

# ç‹¬æœ‰å…³é”®è¯
unique1 = article1_keywords - article2_keywords
unique2 = article2_keywords - article1_keywords
print(f"æ–‡ç« 1ç‹¬æœ‰: {unique1}")
print(f"æ–‡ç« 2ç‹¬æœ‰: {unique2}")

# æ‰€æœ‰å…³é”®è¯
all_keywords = article1_keywords | article2_keywords
print(f"æ‰€æœ‰å…³é”®è¯: {all_keywords}")

# ----------------------------------------------------------------------------
# æƒé™ç³»ç»Ÿ
# ----------------------------------------------------------------------------

# ç”¨æˆ·æƒé™
admin_permissions = {"read", "write", "delete", "manage_users"}
user_permissions = {"read", "write"}

# æ£€æŸ¥æƒé™
required = {"delete"}
has_permission = required <= admin_permissions
print(f"ç®¡ç†å‘˜æœ‰åˆ é™¤æƒé™: {has_permission}")

# æ·»åŠ æƒé™
user_permissions.update({"read", "share"})
print(f"ç”¨æˆ·æƒé™: {user_permissions}")

# ============================================================================
# ç»ƒä¹ é¢˜
# ============================================================================
"""
ã€ç»ƒä¹ 1ã€‘é›†åˆæ“ä½œ
ç»™å®šä¸¤ä¸ªé›†åˆï¼Œå®Œæˆä»¥ä¸‹æ“ä½œï¼š
A = {1, 2, 3, 4, 5}
B = {4, 5, 6, 7, 8}

1. æ‰¾å‡º A å’Œ B çš„å…±åŒå…ƒç´ 
2. æ‰¾å‡ºåªåœ¨ A ä¸­çš„å…ƒç´ 
3. æ‰¾å‡ºåœ¨ A æˆ– B ä½†ä¸åŒæ—¶åœ¨ä¸¤è€…çš„å…ƒç´ 
4. åˆ¤æ–­ A æ˜¯å¦æ˜¯ {1, 2, 3, 4, 5, 6} çš„å­é›†

ã€ç»ƒä¹ 2ã€‘æ•°æ®å»é‡
ç»™å®šåˆ—è¡¨ [1, 2, 2, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 5]ï¼š
1. ä½¿ç”¨é›†åˆå»é‡
2. ç»Ÿè®¡æ¯ä¸ªæ•°å­—å‡ºç°çš„æ¬¡æ•°
3. æ‰¾å‡ºå‡ºç°æ¬¡æ•°å¤§äº 2 çš„æ•°å­—

ã€ç»ƒä¹ 3ã€‘æƒé™æ£€æŸ¥
å®ç°ä¸€ä¸ªç®€å•çš„æƒé™ç³»ç»Ÿï¼š
1. å®šä¹‰è§’è‰²å’Œæƒé™
2. æ£€æŸ¥ç”¨æˆ·æ˜¯å¦æœ‰æŸä¸ªæƒé™
3. æ·»åŠ å’Œç§»é™¤æƒé™
"""

# ============================================================================
# æœ¬èŠ‚å°ç»“
# ============================================================================
"""
âœ… æŒæ¡çš„çŸ¥è¯†ç‚¹ï¼š
1. é›†åˆçš„åˆ›å»ºå’Œç‰¹ç‚¹
2. é›†åˆçš„æ·»åŠ å’Œåˆ é™¤
3. é›†åˆè¿ç®—ï¼ˆå¹¶ã€äº¤ã€å·®ã€å¯¹ç§°å·®ï¼‰
4. å­é›†å’Œè¶…é›†åˆ¤æ–­
5. frozenset ä¸å¯å˜é›†åˆ
6. é›†åˆçš„åº”ç”¨åœºæ™¯ï¼ˆå»é‡ã€æˆå‘˜æµ‹è¯•ï¼‰

ğŸ”§ PyCharm æŠ€å·§ï¼š
1. Variables é¢æ¿æŸ¥çœ‹é›†åˆå…ƒç´ 
2. Evaluate Expression æµ‹è¯•é›†åˆè¿ç®—
3. ä½¿ç”¨æ–­ç‚¹è§‚å¯Ÿé›†åˆå˜åŒ–

â¡ï¸ ä¸‹ä¸€èŠ‚ï¼šæ¨å¯¼å¼
"""

if __name__ == "__main__":
    print("\n" + "=" * 60)
    print("é›†åˆæ¨¡å—å­¦ä¹ å®Œæˆï¼")
    print("=" * 60)
