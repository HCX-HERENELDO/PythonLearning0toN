# PyCharm 使用教程

## 目录
1. [安装与配置](#1-安装与配置)
2. [项目创建](#2-项目创建)
3. [调试技巧](#3-调试技巧)
4. [代码重构](#4-代码重构)
5. [版本控制](#5-版本控制)
6. [插件推荐](#6-插件推荐)
7. [快捷键大全](#7-快捷键大全)

---

## 1. 安装与配置

### 1.1 下载安装

PyCharm 有两个版本：
- **Community（社区版）**：免费，适合 Python 开发
- **Professional（专业版）**：付费，支持 Web 开发、数据库工具等

下载地址：https://www.jetbrains.com/pycharm/download/

### 1.2 初始配置

#### 配置 Python 解释器

1. 打开 `File` → `Settings`（Mac: `PyCharm` → `Preferences`）
2. 导航到 `Project: 项目名` → `Python Interpreter`
3. 点击齿轮图标 → `Add...`
4. 选择 `Virtualenv Environment` 或 `Conda Environment`

```
推荐配置：
- 使用虚拟环境，隔离项目依赖
- 选择 Python 3.9+ 版本
- 将虚拟环境放在项目目录下（venv 文件夹）
```

#### 配置编码格式

1. `Settings` → `Editor` → `File Encodings`
2. 设置以下选项为 UTF-8：
   - Global Encoding
   - Project Encoding
   - Default encoding for properties files

#### 配置代码风格

1. `Settings` → `Editor` → `Code Style` → `Python`
2. 推荐设置：
   - Tab size: 4
   - Indent: 4
   - Continuation indent: 8
   - 勾选 "Use tab character"

---

## 2. 项目创建

### 2.1 创建新项目

1. `File` → `New Project`
2. 选择项目位置和类型
3. 配置解释器（建议使用虚拟环境）
4. 点击 `Create`

### 2.2 项目结构

```
推荐的项目结构：

project_name/
├── venv/                    # 虚拟环境
├── src/                     # 源代码
│   ├── __init__.py
│   ├── main.py
│   └── modules/
├── tests/                   # 测试代码
│   ├── __init__.py
│   └── test_main.py
├── docs/                    # 文档
├── requirements.txt         # 依赖列表
├── README.md
└── .gitignore
```

### 2.3 文件操作

- **新建文件**：右键目录 → `New` → 选择文件类型
- **复制文件**：选中文件 → `F5` 或 Ctrl+C/Ctrl+V
- **移动文件**：拖拽或 `F6`
- **重命名**：`Shift+F6`（自动更新引用）
- **删除文件**：`Delete`

---

## 3. 调试技巧

### 3.1 设置断点

**基本断点**：
- 点击行号右侧的灰色区域，出现红点表示断点设置成功

**条件断点**：
1. 右键点击断点红点
2. 在弹出框中输入条件表达式
3. 只有条件为 True 时才会暂停

```python
# 示例：当 i > 50 时暂停
for i in range(100):
    result = process(i)  # 在此设置条件断点：i > 50
```

**临时断点**：
- `Ctrl+Alt+Shift+点击` 设置临时断点
- 触发一次后自动消失

### 3.2 调试控制

| 操作 | 快捷键 | 说明 |
|------|--------|------|
| Step Over | F8 | 执行当前行，不进入函数 |
| Step Into | F7 | 进入函数内部 |
| Step Out | Shift+F8 | 跳出当前函数 |
| Resume | F9 | 继续执行到下一个断点 |
| Run to Cursor | Alt+F9 | 执行到光标位置 |

### 3.3 变量监视

**添加监视表达式**：
1. 在 Debug 面板的 Variables 区域点击 `+`
2. 输入要监视的变量或表达式

**查看变量值**：
- 鼠标悬停在变量上查看值
- 在 Variables 面板查看所有局部变量
- 展开复杂数据结构（列表、字典、对象）

**Evaluate Expression**：
- `Alt+F8` 打开表达式求值窗口
- 可以在调试时执行任意代码

### 3.4 调试技巧示例

```python
def process_data(data):
    """数据处理函数示例"""
    result = []
    for i, item in enumerate(data):
        # 在这里设置断点，观察 item 的值
        processed = transform(item)
        result.append(processed)
    return result

# 调试技巧：
# 1. 在 for 循环设置断点
# 2. 使用条件断点：item['value'] > 100
# 3. 在 Evaluate 中测试：transform(item)
# 4. 监视 result 的变化
```

---

## 4. 代码重构

### 4.1 重命名

**重命名变量/函数/类**：
- 快捷键：`Shift+F6`
- 自动更新所有引用

```
示例：
将变量 count 重命名为 counter
PyCharm 会自动更新所有使用 count 的地方
```

### 4.2 提取方法

1. 选中要提取的代码块
2. `Ctrl+Alt+M`
3. 输入方法名称
4. PyCharm 自动创建方法并替换原代码

```python
# 重构前
def process():
    data = load_data()
    result = []
    for item in data:
        result.append(item * 2)
    save_result(result)

# 重构后
def process():
    data = load_data()
    result = process_items(data)
    save_result(result)

def process_items(data):
    result = []
    for item in data:
        result.append(item * 2)
    return result
```

### 4.3 提取变量

- `Ctrl+Alt+V`：提取为局部变量
- `Ctrl+Alt+F`：提取为字段（类属性）
- `Ctrl+Alt+C`：提取为常量

### 4.4 内联变量/方法

- `Ctrl+Alt+N`：将变量或方法内联回原处

### 4.5 移动代码

- `F6`：移动类/方法/文件到其他位置
- 自动更新所有引用

---

## 5. 版本控制

### 5.1 Git 基本操作

**初始化仓库**：
1. `VCS` → `Enable Version Control Integration`
2. 选择 Git

**提交代码**：
- `Ctrl+K` 打开提交窗口
- 选择要提交的文件
- 输入提交信息
- 点击 `Commit` 或 `Commit and Push`

**查看历史**：
- `Alt+9` 打开 Version Control 面板
- 右键文件 → `Git` → `Show History`

**分支管理**：
- `Ctrl+Shift+` 打开分支菜单
- 可以创建、切换、合并分支

### 5.2 解决冲突

当多人协作出现冲突时：

1. PyCharm 会显示冲突文件
2. 点击文件打开合并工具
3. 选择保留的代码（左侧/右侧/合并）
4. 保存并提交

### 5.3 Git 最佳实践

```
提交原则：
1. 频繁提交，每次提交只做一件事
2. 写清晰的提交信息
3. 提交前检查代码

分支策略：
- main/master：生产代码
- develop：开发分支
- feature/*：功能分支
- hotfix/*：紧急修复分支
```

---

## 6. 插件推荐

### 6.1 必装插件

| 插件名称 | 功能说明 |
|----------|----------|
| **Chinese Language Pack** | 中文语言包 |
| **Key Promoter X** | 快捷键提示 |
| **Rainbow Brackets** | 彩虹括号 |
| **CodeGlance** | 代码缩略图 |
| **GitToolBox** | Git 增强 |
| **Translation** | 翻译插件 |

### 6.2 Python 开发插件

| 插件名称 | 功能说明 |
|----------|----------|
| **Python Security** | 安全检查 |
| **Kite** | AI 代码补全 |
| **Jupyter Notebook** | Jupyter 支持 |
| **String Manipulation** | 字符串处理 |

### 6.3 安装插件

1. `Settings` → `Plugins`
2. 点击 `Marketplace`
3. 搜索插件名称
4. 点击 `Install`
5. 重启 PyCharm

---

## 7. 快捷键大全

### 7.1 编辑快捷键

| 功能 | Windows/Linux | macOS |
|------|---------------|-------|
| 复制当前行 | Ctrl+D | Cmd+D |
| 删除当前行 | Ctrl+Y | Cmd+Delete |
| 上移/下移行 | Alt+Shift+↑/↓ | Alt+Shift+↑/↓ |
| 复制行 | Ctrl+C (无选择) | Cmd+C |
| 粘贴 | Ctrl+V | Cmd+V |
| 撤销 | Ctrl+Z | Cmd+Z |
| 重做 | Ctrl+Shift+Z | Cmd+Shift+Z |

### 7.2 导航快捷键

| 功能 | Windows/Linux | macOS |
|------|---------------|-------|
| 查找类 | Ctrl+N | Cmd+O |
| 查找文件 | Ctrl+Shift+N | Cmd+Shift+O |
| 全局搜索 | Ctrl+Shift+F | Cmd+Shift+F |
| 最近文件 | Ctrl+E | Cmd+E |
| 跳转到定义 | Ctrl+B / Ctrl+点击 | Cmd+B / Cmd+点击 |
| 返回上一位置 | Ctrl+Alt+← | Cmd+[ |
| 前进下一位置 | Ctrl+Alt+→ | Cmd+] |

### 7.3 调试快捷键

| 功能 | Windows/Linux | macOS |
|------|---------------|-------|
| 运行 | Shift+F10 | Ctrl+R |
| 调试 | Shift+F9 | Ctrl+D |
| Step Over | F8 | F8 |
| Step Into | F7 | F7 |
| Step Out | Shift+F8 | Shift+F8 |
| Resume | F9 | F9 |
| Evaluate Expression | Alt+F8 | Alt+F8 |

### 7.4 重构快捷键

| 功能 | Windows/Linux | macOS |
|------|---------------|-------|
| 重命名 | Shift+F6 | Shift+F6 |
| 提取方法 | Ctrl+Alt+M | Cmd+Alt+M |
| 提取变量 | Ctrl+Alt+V | Cmd+Alt+V |
| 提取常量 | Ctrl+Alt+C | Cmd+Alt+C |
| 内联 | Ctrl+Alt+N | Cmd+Alt+N |

### 7.5 代码辅助快捷键

| 功能 | Windows/Linux | macOS |
|------|---------------|-------|
| 代码补全 | Ctrl+Space | Ctrl+Space |
| 智能补全 | Ctrl+Shift+Space | Ctrl+Shift+Space |
| 参数信息 | Ctrl+P | Cmd+P |
| 快速修复 | Alt+Enter | Alt+Enter |
| 格式化代码 | Ctrl+Alt+L | Cmd+Alt+L |
| 优化导入 | Ctrl+Alt+O | Cmd+Alt+O |

---

## 附录：调试实战案例

### 案例 1：调试循环中的问题

```python
# 问题：找出列表中第一个负数
numbers = [1, 2, -3, 4, -5, 6]

for i, num in enumerate(numbers):
    # 断点 1：条件断点 num < 0
    # 监视：i, num
    if num < 0:
        # 断点 2：找到负数时暂停
        print(f"找到负数: {num}，索引: {i}")
        break
```

### 案例 2：调试函数调用链

```python
def func_a(x):
    return func_b(x) * 2

def func_b(x):
    return func_c(x) + 1

def func_c(x):
    # 在这里设置断点
    # 使用 Step Out 逐层返回
    return x ** 2

# 调试步骤：
# 1. 在 func_c 设置断点
# 2. 查看 Call Stack 面板
# 3. 使用 Step Out 返回 func_b
# 4. 再使用 Step Out 返回 func_a
```

### 案例 3：调试异常

```python
def risky_function(data):
    """可能抛出异常的函数"""
    result = data['key'] / data['value']
    return result

# 配置异常断点：
# 1. Run → View Breakpoints
# 2. 点击 + → Python Exception Breakpoints
# 3. 选择要捕获的异常类型
# 4. 当异常抛出时自动暂停
```

---

## 总结

掌握 PyCharm 的使用技巧可以大大提高开发效率：

1. **快捷键是关键**：熟记常用快捷键
2. **调试是利器**：善用断点和变量监视
3. **重构是美德**：保持代码整洁
4. **版本控制是保障**：养成提交习惯
5. **插件是加速器**：扩展功能

**学习路径**：
- 第1周：熟悉基本操作和导航
- 第2周：掌握调试技巧
- 第3周：学习重构和版本控制
- 第4周：安装插件，个性化配置

**进阶资源**：
- 官方文档：https://www.jetbrains.com/help/pycharm/
- 快捷键卡片：Settings → Keymap
- 在线教程：JetBrains Academy
