#!/usr/bin/env python
# -*- coding: utf-8 -*-
"""
============================================================================
æ¨¡å—åç§°ï¼šæ¡ä»¶è¯­å¥
å­¦ä¹ ç›®æ ‡ï¼šæŒæ¡ if æ¡ä»¶è¯­å¥çš„ä½¿ç”¨ï¼Œç†è§£ä»£ç å—çš„ç¼©è¿›è§„åˆ™
PyCharm æŠ€å·§ï¼šå­¦ä¹ ä½¿ç”¨æ–­ç‚¹è°ƒè¯•æ¡ä»¶è¯­å¥
============================================================================
"""

# ============================================================================
# ç¬¬ä¸€éƒ¨åˆ†ï¼šæ¡ä»¶è¯­å¥åŸºç¡€
# ============================================================================
"""
ã€æ¦‚å¿µè®²è§£ã€‘
æ¡ä»¶è¯­å¥ç”¨äºæ ¹æ®æ¡ä»¶æ‰§è¡Œä¸åŒçš„ä»£ç å—ã€‚
Python ä½¿ç”¨ç¼©è¿›ï¼ˆ4ä¸ªç©ºæ ¼ï¼‰æ¥è¡¨ç¤ºä»£ç å—ï¼Œè€Œä¸æ˜¯å¤§æ‹¬å·ã€‚
"""

# ----------------------------------------------------------------------------
# if è¯­å¥
# ----------------------------------------------------------------------------

age = 20

# åŸºæœ¬ if è¯­å¥
if age >= 18:
    print("ä½ å·²æˆå¹´")  # æ³¨æ„ç¼©è¿›

# ã€PyCharm æŠ€å·§ã€‘
# åœ¨ if è¡Œè®¾ç½®æ–­ç‚¹ï¼Œå¯ä»¥è§‚å¯Ÿæ¡ä»¶åˆ¤æ–­çš„è¿‡ç¨‹
# æŒ‰ F8 é€æ­¥æ‰§è¡Œï¼Œè§‚å¯Ÿç¨‹åºèµ°å“ªä¸ªåˆ†æ”¯

# ----------------------------------------------------------------------------
# if-else è¯­å¥
# ----------------------------------------------------------------------------

score = 75

if score >= 60:
    print("åŠæ ¼")
else:
    print("ä¸åŠæ ¼")

# ----------------------------------------------------------------------------
# if-elif-else è¯­å¥
# ----------------------------------------------------------------------------

score = 85

if score >= 90:
    grade = "ä¼˜ç§€"
elif score >= 80:
    grade = "è‰¯å¥½"
elif score >= 70:
    grade = "ä¸­ç­‰"
elif score >= 60:
    grade = "åŠæ ¼"
else:
    grade = "ä¸åŠæ ¼"

print(f"æˆç»©ç­‰çº§ï¼š{grade}")

# ============================================================================
# ç¬¬äºŒéƒ¨åˆ†ï¼šæ¡ä»¶è¡¨è¾¾å¼
# ============================================================================

# ----------------------------------------------------------------------------
# æ¯”è¾ƒè¿ç®—ç¬¦
# ----------------------------------------------------------------------------

x, y = 10, 5

print(f"x == y: {x == y}")   # ç­‰äº
print(f"x != y: {x != y}")   # ä¸ç­‰äº
print(f"x > y: {x > y}")     # å¤§äº
print(f"x < y: {x < y}")     # å°äº
print(f"x >= y: {x >= y}")   # å¤§äºç­‰äº
print(f"x <= y: {x <= y}")   # å°äºç­‰äº

# ----------------------------------------------------------------------------
# é€»è¾‘è¿ç®—ç¬¦
# ----------------------------------------------------------------------------

age = 25
has_license = True

# andï¼šä¸¤è€…éƒ½ä¸º True
if age >= 18 and has_license:
    print("å¯ä»¥é©¾é©¶")

# orï¼šè‡³å°‘ä¸€ä¸ªä¸º True
is_member = False
is_vip = True

if is_member or is_vip:
    print("äº«å—ä¼˜æƒ ")

# notï¼šå–å
is_banned = False

if not is_banned:
    print("è´¦å·æ­£å¸¸")

# ----------------------------------------------------------------------------
# æˆå‘˜è¿ç®—ç¬¦
# ----------------------------------------------------------------------------

fruits = ["è‹¹æœ", "é¦™è•‰", "æ©™å­"]

if "è‹¹æœ" in fruits:
    print("æœ‰è‹¹æœ")

if "è‘¡è„" not in fruits:
    print("æ²¡æœ‰è‘¡è„")

# ----------------------------------------------------------------------------
# èº«ä»½è¿ç®—ç¬¦
# ----------------------------------------------------------------------------

a = None

if a is None:
    print("a æ˜¯ None")

# ============================================================================
# ç¬¬ä¸‰éƒ¨åˆ†ï¼šåµŒå¥—æ¡ä»¶
# ============================================================================

# ----------------------------------------------------------------------------
# åµŒå¥— if è¯­å¥
# ----------------------------------------------------------------------------

age = 20
has_id = True

if age >= 18:
    print("å¹´é¾„è¾¾æ ‡")
    if has_id:
        print("å¯ä»¥è´­ä¹°çƒŸé…’")
    else:
        print("è¯·å‡ºç¤ºèº«ä»½è¯")
else:
    print("æœªæˆå¹´ï¼Œç¦æ­¢è´­ä¹°")

# ã€æ³¨æ„ã€‘åµŒå¥—ä¸å®œè¿‡æ·±ï¼Œå»ºè®®ä¸è¶…è¿‡3å±‚

# ----------------------------------------------------------------------------
# ä½¿ç”¨é€»è¾‘è¿ç®—ç¬¦ç®€åŒ–åµŒå¥—
# ----------------------------------------------------------------------------

# åµŒå¥—å†™æ³•ï¼ˆä¸æ¨èï¼‰
age = 20
has_license = True

if age >= 18:
    if has_license:
        print("å¯ä»¥é©¾é©¶")

# ç®€åŒ–å†™æ³•ï¼ˆæ¨èï¼‰
if age >= 18 and has_license:
    print("å¯ä»¥é©¾é©¶")

# ============================================================================
# ç¬¬å››éƒ¨åˆ†ï¼šæ¡ä»¶è¡¨è¾¾å¼ï¼ˆä¸‰å…ƒè¿ç®—ç¬¦ï¼‰
# ============================================================================

# ----------------------------------------------------------------------------
# ä¸‰å…ƒè¡¨è¾¾å¼
# ----------------------------------------------------------------------------

# ä¼ ç»Ÿå†™æ³•
age = 20
if age >= 18:
    status = "æˆå¹´"
else:
    status = "æœªæˆå¹´"

# ä¸‰å…ƒè¡¨è¾¾å¼å†™æ³•
status = "æˆå¹´" if age >= 18 else "æœªæˆå¹´"
print(f"çŠ¶æ€ï¼š{status}")

# åµŒå¥—ä¸‰å…ƒè¡¨è¾¾å¼ï¼ˆä¸æ¨èï¼Œå¯è¯»æ€§å·®ï¼‰
score = 75
grade = "ä¼˜ç§€" if score >= 90 else "è‰¯å¥½" if score >= 80 else "åŠæ ¼" if score >= 60 else "ä¸åŠæ ¼"
print(f"ç­‰çº§ï¼š{grade}")

# å®é™…åº”ç”¨ï¼šè®¾ç½®é»˜è®¤å€¼
user_input = ""
name = user_input if user_input else "åŒ¿åç”¨æˆ·"
print(f"åç§°ï¼š{name}")

# ============================================================================
# ç¬¬äº”éƒ¨åˆ†ï¼šæ¡ä»¶è¯­å¥çš„é«˜çº§ç”¨æ³•
# ============================================================================

# ----------------------------------------------------------------------------
# å¤šæ¡ä»¶åˆ¤æ–­çš„ä¼˜åŒ–
# ----------------------------------------------------------------------------

# ä½¿ç”¨å­—å…¸æ›¿ä»£å¤šä¸ª if-elif
def get_grade(score):
    """æ ¹æ®åˆ†æ•°è¿”å›ç­‰çº§"""
    grade_map = {
        (90, 100): "ä¼˜ç§€",
        (80, 90): "è‰¯å¥½",
        (70, 80): "ä¸­ç­‰",
        (60, 70): "åŠæ ¼",
    }
    
    for (low, high), grade in grade_map.items():
        if low <= score < high:
            return grade
    return "ä¸åŠæ ¼"

print(f"85åˆ†çš„ç­‰çº§ï¼š{get_grade(85)}")

# ä½¿ç”¨ match-caseï¼ˆPython 3.10+ï¼‰
def http_status(status_code):
    """æ ¹æ®çŠ¶æ€ç è¿”å›æè¿°"""
    match status_code:
        case 200:
            return "OK"
        case 404:
            return "Not Found"
        case 500:
            return "Internal Server Error"
        case _:  # é»˜è®¤æƒ…å†µ
            return "Unknown"

# print(http_status(200))

# ----------------------------------------------------------------------------
# çŸ­è·¯æ±‚å€¼çš„åº”ç”¨
# ----------------------------------------------------------------------------

# å®‰å…¨åœ°æ£€æŸ¥å±æ€§
user = None

# å¯èƒ½å‡ºé”™çš„æ–¹å¼
# if user.is_active:  # AttributeError: 'NoneType' object has no attribute 'is_active'
#     print("ç”¨æˆ·æ´»è·ƒ")

# å®‰å…¨çš„æ–¹å¼
if user and hasattr(user, 'is_active'):
    print("ç”¨æˆ·æ´»è·ƒ")

# è®¾ç½®é»˜è®¤å€¼
name = None
display_name = name or "æ¸¸å®¢"  # å¦‚æœ name ä¸ºå‡å€¼ï¼Œä½¿ç”¨é»˜è®¤å€¼
print(f"æ˜¾ç¤ºåç§°ï¼š{display_name}")

# ============================================================================
# ç¬¬å…­éƒ¨åˆ†ï¼šå¸¸è§é™·é˜±ä¸æœ€ä½³å®è·µ
# ============================================================================

# ----------------------------------------------------------------------------
# å¸¸è§é™·é˜±
# ----------------------------------------------------------------------------

# 1. æ··æ·† == å’Œ is
a = [1, 2, 3]
b = [1, 2, 3]

print(a == b)  # Trueï¼Œå€¼ç›¸ç­‰
print(a is b)  # Falseï¼Œä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡

# 2. é“¾å¼æ¯”è¾ƒçš„æ³¨æ„ç‚¹
x = 5
print(1 < x < 10)  # True
print(10 > x > 1)  # True
# print(x < 10 > 5)  # ç­‰ä»·äº x < 10 and 10 > 5

# 3. ç©ºå€¼çš„åˆ¤æ–­
empty_list = []
empty_dict = {}
empty_str = ""
zero = 0
none_value = None

# æ¨èçš„åˆ¤æ–­æ–¹å¼
if not empty_list:
    print("ç©ºåˆ—è¡¨")

if none_value is None:
    print("None å€¼")

# ----------------------------------------------------------------------------
# æœ€ä½³å®è·µ
# ----------------------------------------------------------------------------

# 1. ä½¿ç”¨æœ‰æ„ä¹‰çš„æ¡ä»¶å˜é‡
user_is_logged_in = True
has_permission = False

if user_is_logged_in and has_permission:
    print("å…è®¸è®¿é—®")

# 2. é¿å…å¤æ‚çš„æ¡ä»¶è¡¨è¾¾å¼
# ä¸æ¨è
# if user.age >= 18 and user.has_license and not user.is_banned and user.credits > 0:

# æ¨èï¼šæ‹†åˆ†æˆå¤šä¸ªæ¡ä»¶
age_valid = age >= 18
can_drive = has_license and not is_banned
has_credits = credits > 0

if age_valid and can_drive and has_credits:
    print("å…è®¸ç§Ÿè½¦")

# 3. å°½æ—©è¿”å›ï¼ˆå‡å°‘åµŒå¥—ï¼‰
def process_user(user):
    """å¤„ç†ç”¨æˆ·æ•°æ®"""
    # ä¸æ¨è
    # if user:
    #     if user.is_active:
    #         if user.has_permission:
    #             return "æˆåŠŸ"
    
    # æ¨èï¼šå°½æ—©è¿”å›
    if not user:
        return "ç”¨æˆ·ä¸å­˜åœ¨"
    if not user.is_active:
        return "ç”¨æˆ·æœªæ¿€æ´»"
    if not user.has_permission:
        return "æ— æƒé™"
    
    return "æˆåŠŸ"

# ============================================================================
# ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå®é™…åº”ç”¨ç¤ºä¾‹
# ============================================================================

# ----------------------------------------------------------------------------
# ç”¨æˆ·ç™»å½•éªŒè¯
# ----------------------------------------------------------------------------

def check_login(username, password):
    """æ¨¡æ‹Ÿç™»å½•éªŒè¯"""
    # æ¨¡æ‹Ÿæ•°æ®åº“ä¸­çš„ç”¨æˆ·
    users = {
        "admin": "admin123",
        "user": "user123",
    }
    
    # æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦å­˜åœ¨
    if username not in users:
        return "ç”¨æˆ·åä¸å­˜åœ¨"
    
    # æ£€æŸ¥å¯†ç æ˜¯å¦æ­£ç¡®
    if users[username] != password:
        return "å¯†ç é”™è¯¯"
    
    return "ç™»å½•æˆåŠŸ"

print(check_login("admin", "admin123"))
print(check_login("admin", "wrong"))
print(check_login("unknown", "123"))

# ----------------------------------------------------------------------------
# æˆç»©è¯„çº§ç³»ç»Ÿ
# ----------------------------------------------------------------------------

def evaluate_student(name, scores):
    """è¯„ä¼°å­¦ç”Ÿæˆç»©"""
    # è®¡ç®—å¹³å‡åˆ†
    avg_score = sum(scores.values()) / len(scores)
    
    # ç¡®å®šç­‰çº§
    if avg_score >= 90:
        level = "ä¼˜ç§€"
    elif avg_score >= 80:
        level = "è‰¯å¥½"
    elif avg_score >= 70:
        level = "ä¸­ç­‰"
    elif avg_score >= 60:
        level = "åŠæ ¼"
    else:
        level = "ä¸åŠæ ¼"
    
    # æ£€æŸ¥æ˜¯å¦æœ‰ä¸åŠæ ¼ç§‘ç›®
    failed_subjects = [subj for subj, score in scores.items() if score < 60]
    
    # ç”ŸæˆæŠ¥å‘Š
    report = f"""
    ====== å­¦ç”Ÿæˆç»©æŠ¥å‘Š ======
    å§“åï¼š{name}
    å„ç§‘æˆç»©ï¼š
    """
    
    for subject, score in scores.items():
        status = "âœ“" if score >= 60 else "âœ—"
        report += f"\n      {subject}: {score} {status}"
    
    report += f"""
    å¹³å‡åˆ†ï¼š{avg_score:.1f}
    ç­‰çº§ï¼š{level}
    """
    
    if failed_subjects:
        report += f"ä¸åŠæ ¼ç§‘ç›®ï¼š{', '.join(failed_subjects)}\n"
    
    report += "=" * 28
    
    return report

# æµ‹è¯•
student_scores = {
    "è¯­æ–‡": 85,
    "æ•°å­¦": 92,
    "è‹±è¯­": 78,
    "ç‰©ç†": 58,
}

print(evaluate_student("å¼ ä¸‰", student_scores))

# ============================================================================
# ç»ƒä¹ é¢˜
# ============================================================================
"""
ã€ç»ƒä¹ 1ã€‘ç¼–å†™ä¸€ä¸ªç¨‹åºï¼š
- è¾“å…¥ä¸€ä¸ªæ•°å­—
- åˆ¤æ–­æ˜¯æ­£æ•°ã€è´Ÿæ•°è¿˜æ˜¯é›¶
- å¦‚æœæ˜¯æ­£æ•°ï¼Œåˆ¤æ–­æ˜¯å¥‡æ•°è¿˜æ˜¯å¶æ•°

ã€ç»ƒä¹ 2ã€‘ç¼–å†™ä¸€ä¸ªç®€å•çš„è®¡ç®—å™¨ï¼š
- è¾“å…¥ä¸¤ä¸ªæ•°å­—å’Œä¸€ä¸ªè¿ç®—ç¬¦ï¼ˆ+, -, *, /ï¼‰
- è¾“å‡ºè®¡ç®—ç»“æœ
- å¤„ç†é™¤æ•°ä¸ºé›¶çš„æƒ…å†µ

ã€ç»ƒä¹ 3ã€‘ç¼–å†™ä¸€ä¸ª BMI è®¡ç®—å™¨ï¼š
- è¾“å…¥èº«é«˜ï¼ˆç±³ï¼‰å’Œä½“é‡ï¼ˆå…¬æ–¤ï¼‰
- è®¡ç®— BMI = ä½“é‡ / èº«é«˜Â²
- æ ¹æ® BMI å€¼åˆ¤æ–­ä½“é‡çŠ¶å†µï¼š
  - < 18.5: åç˜¦
  - 18.5-24: æ­£å¸¸
  - 24-28: åèƒ–
  - >= 28: è‚¥èƒ–
"""

# ============================================================================
# æœ¬èŠ‚å°ç»“
# ============================================================================
"""
âœ… æŒæ¡çš„çŸ¥è¯†ç‚¹ï¼š
1. if-elif-else è¯­å¥çš„ä½¿ç”¨
2. ä»£ç å—çš„ç¼©è¿›è§„åˆ™
3. æ¯”è¾ƒè¿ç®—ç¬¦å’Œé€»è¾‘è¿ç®—ç¬¦
4. ä¸‰å…ƒæ¡ä»¶è¡¨è¾¾å¼
5. åµŒå¥—æ¡ä»¶å’Œæ¡ä»¶ä¼˜åŒ–
6. match-case è¯­å¥ï¼ˆPython 3.10+ï¼‰

ğŸ”§ PyCharm æŠ€å·§ï¼š
1. åœ¨æ¡ä»¶è¯­å¥è®¾ç½®æ–­ç‚¹
2. ä½¿ç”¨ F8 é€æ­¥æ‰§è¡Œ
3. åœ¨ Variables é¢æ¿æŸ¥çœ‹å˜é‡å€¼
4. ä½¿ç”¨ Evaluate Expression æµ‹è¯•æ¡ä»¶

â¡ï¸ ä¸‹ä¸€èŠ‚ï¼šå¾ªç¯è¯­å¥
"""

if __name__ == "__main__":
    print("\n" + "=" * 60)
    print("æ¡ä»¶è¯­å¥æ¨¡å—å­¦ä¹ å®Œæˆï¼")
    print("=" * 60)
